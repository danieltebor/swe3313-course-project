@using HanksMineralEmporium.Service.AuthenticationService
@inject IAuthenticationService authenticationService

<MudStack>
    <MudPaper Class="pa-4" Style ="background:#124419">
        <MudStack>
            <MudPaper Class="pa-4" Style="background:#9A8716;">

                <MudText Align="Align.Center" Style="@($"color:{Colors.Shades.Black};")" Typo="Typo.h6">Create Account</MudText>
                <br>

                <MudTextField T="string" Label="Your name" />
                <MudTextField T="string" Label="Email" />
                <MudTextField T="string" Label="Password" HelperText= "*Enter at least 6 numbers and/or letters for the password" />
                <br>

                <MudStack>
                    <MudPaper Class="d-flex align-center flex-grow-1 gap-4" Elevation="0">
                    <MudButton
                        Class="py-2 d-flex flex-1" Variant="Variant.Filled" Style="@($"color:{Colors.Shades.White}; background:{Colors.Grey.Default};")" OnClick="SignUp" Href="/components/link#onclick">Sign Up</MudButton>
                    </MudPaper>
                </MudStack>

                <br>
                <MudStack>
                    <MudPaper Class="d-flex align-center flex-grow-1 gap-4" Elevation="0">
                    <MudButton Class="py-2 d-flex flex-1" Variant="Variant.Filled" Style="@($"color:{Colors.Shades.White}; background:{Colors.Grey.Default};")" OnClick="GoBack">Go Back</MudButton>
                    </MudPaper>
                </MudStack>

            </MudPaper>
        </MudStack>
    </MudPaper>
</MudStack>

@code {
    public string? username;
    public string? password;
    public string errorMessage = "";

    void SignUp() {     // call register
        try{
            if(username == null){
                throw new ArgumentNullException("Must enter a username");
            }
            if(password == null){
                throw new ArgumentNullException("Must enter a password");
            }
            authenticationService.RegisterUserAsync(username, password);
            <ViewItemsPage />   // supposed to take u to next page; idk if it works
        }
        catch(Exception E) {
            errorMessage = E.Message;
        }
    }

    void GoBack(){
        <HomePage /> // supposed to take u to next page; idk if it works
    }

}